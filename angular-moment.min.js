!function(){"use strict";function a(a,b){return a.module("angularMoment",[]).constant("angularMomentConfig",{preprocess:null,timezone:""}).constant("moment",b).constant("amTimeAgoConfig",{withoutSuffix:!1}).directive("amTimeAgo",["$window","moment","amMoment","amTimeAgoConfig","angularMomentConfig",function(b,c,d,e,f){return{replace:!0,template:'<time datetime="{{datetime}}"></time>',scope:{datetime:"=amTimeAgo",format:"=amFormat",withoutSuffix:"=amWithoutSuffix",preprocess:"@amPreprocess"},link:function(g,h){function i(){n&&(b.clearTimeout(n),n=null)}function j(a){var d=c().diff(a,"minute"),e=3600;1>d?e=1:60>d?e=30:180>d&&(e=300),h.text(a.fromNow(o)),n=b.setTimeout(function(){j(a)},1e3*e)}function k(){i(),l&&j(d.preprocessDate(l,p,m))}var l,m,n=null,o=e.withoutSuffix,p=g.preprocess||f.preprocess;g.$watch("datetime",function(a){return"undefined"==typeof a||null===a||""===a?(i(),void(l&&(h.text(""),l=null))):(l=a,void k())}),a.isDefined(g.format)&&g.$watch("format",function(a){m=a,k()}),a.isDefined(g.withoutSuffix)&&g.$watch("withoutSuffix",function(a){"boolean"==typeof a?(o=a,k()):o=e.withoutSuffix}),a.isDefined(g.preprocess)&&g.$watch("preprocess",function(a){p=a,k()}),g.$on("$destroy",function(){i()}),g.$on("amMoment:languageChange",function(){k()})}}}]).service("amMoment",["moment","$rootScope","$log","angularMomentConfig",function(b,c,d,e){this.preprocessors={utc:b.utc,unix:b.unix},this.changeLanguage=function(d){var e=b.lang(d);return a.isDefined(d)&&c.$broadcast("amMoment:languageChange"),e},this.preprocessDate=function(a,c,e){return this.preprocessors[c]?this.preprocessors[c](a,e):(c&&d.warn("angular-moment: Ignoring unsupported value for preprocess: "+c),!isNaN(parseFloat(a))&&isFinite(a)?b(parseInt(a,10)):b(a,e))},this.applyTimezone=function(a){var b=e.timezone;return a&&b&&(a.tz?a=a.tz(b):d.warn("angular-moment: timezone specified but moment.tz() is undefined. Did you forget to include moment-timezone.js?")),a}}]).filter("amCalendar",["moment","amMoment",function(a,b){return function(c,d){if("undefined"==typeof c||null===c)return"";c=b.preprocessDate(c,d);var e=a(c);return e.isValid()?b.applyTimezone(e).calendar():""}}]).filter("amDateFormat",["moment","amMoment",function(a,b){return function(c,d,e){if("undefined"==typeof c||null===c)return"";c=b.preprocessDate(c,e);var f=a(c);return f.isValid()?b.applyTimezone(f).format(d):""}}]).filter("amDurationFormat",["moment",function(a){return function(b,c,d){return"undefined"==typeof b||null===b?"":a.duration(b,c).humanize(d)}}])}"function"==typeof define&&define.amd?define("angular-moment",["angular","moment"],a):a(angular,window.moment)}();